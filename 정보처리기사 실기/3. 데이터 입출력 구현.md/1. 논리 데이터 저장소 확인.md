# 1-1 데이터 모델

## 1. 데이터 모델 개념
- 현실 세계의 정보를 인간과 컴퓨터가 이해할 수 있도록 추상화하여 표현한 모델
- 구성요소 :
    - 연산 : 데이터베이스에 저장된 실체 데이터를 처리하는 작업에 대한 명세
    - 구조 (논리적 데이터 구조) : 데이터베이스에 논리적으로 표현될 대상으로서의 개체 타입과 개체 타입 간의 관계
    - 제약 조건 : 데이터베이스에 저장될 수 있는 실제 데이터의 논리적인 제약 조건

## 2. 데이터 모델 절차

- 개념적 설계 (개념적 데이터 모델) :
    - 현실 세계에 대한 인식을 추상적, 개념적으로 표현하여 개념적 구조를 도출
    - 개체관계 다이어그램 (E-R 다이어그램)

- 논리적 설계 (논리적 데이터 모델) :
    - 트랜잭션의 인터페이스 설계
    - DBMS에 맞는 논리적 스키마 설계
    - 정규화 : 관계형 데이터 모델에서 데이터 중복 제거하여 이상 현상 방지, 데이터 일관성과 정확성을 유지하기 위해 무손실 분해하는 과정

- 물리적 설계 (물리적 데이터 모델) :
    - 논리 데이터 모델을 특정 DBMS의 특성 및 성능을 고려하여 물리적인 스키마를 만드는 단계
    - 반 정규화 : 정규화된 엔터티, 속성, 관계에 대해 성능 향상과 개발 운영의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링의 기법

# 2. 논리 데이터 모델 검증

## 1. 논리 데이터 모델링 개념
- 업무의 모습을 모델링 표기법으로 형상화하여 사람이 이해하기 쉽게 표현하는 프로세스
- 개념 모델로부터 업무 영역의 업무 데이터 및 규칙을 구체적으로 표현
- 개념 모델 : 주제 영역과 핵심 데이터 집합간의 관계를 정의하는 모델

## 2. 논리적 데이터 모델링 종류
- 관계 데이터 모델 :
    - 논리적 구조가 2차원 테이블 형태로 구성된 모델
    - 기본키와 외래키로 관계 표현
    - 1:1, 1:N, N:M 관계를 자유롭게 표현

- 계층 데이터 모델 :
    - 논리적 구조가 트리 형태로 구성
    - 상하관계 존재
    - 1:N 관계만 허용

 - 네트워크 데이터 모델 :
    - 논리적 구조가 그래프 형태로 구성
    - CODASYL DBTG 모델
    - N:M 관계를 만족하는 구조

## 3. 관계 데이터 모델
 - 관계 데이터 모델 :
    - 데이터를 행과 열로 구성된 2차원 테이블 형태로 구성
    - 릴레이션 : 행과 열로 구성된 테이블
    - 튜플 : 릴레이션의 행
    - 속성 : 릴레이션의 열
    - 카디널리티 : 튜플 수
    - 차수 : 애트리뷰트 수
    - 스키마 : 데이터베이스의 구조, 제약 조건 등의 정보를 담고 있는 기본적인 구조
    - 인스턴스 : 정의된 스키마에 따라 생성된 테이블에 실제 저장된 데이터 집합

- 관계 대수 :
    - 원하는 정보와 그 정보를 어떻게 유도하는가를 기술하는 절차적 정형 언어
    - 일반 집합 연산자 :
        - 합집합 $\cup$
        - 교집합 $\cap$
        - 차집합 \-
        - 카티션 프로덕트 X
    - 순수 관계 연산자 :
        - 셀렉트 ($\delta$) : 릴레이션 R에서 조건을 만족하는 튜플 반환
        - 프로젝트 ($\pi$) : 리레이션 R에서 주어진 속성들의 값으로만 구성된 튜플 반환
        - 조인 ($\Join$) : 공통 속성을 이용해 R과 S의 튜플들을 연결해 만들어진 튜플 반환 
        - 디비전 ($\div$) : 릴레이션 S의 모든 튜플과 관련 있는 R의 튜플 반환

- 관계 해석 :
    - 튜플 관계 해석과 도메인 관계 해석을 하는 비절차적 언어
    - 프레디킷 해석 기반, 비절차적 언어

## 4. 논리적 데이터 모델링 속성 
- 논리 데이터 모델링 속성 :
    - 개체 : 사물 또는 사건으로 정의
    - 속성 : 개체가  가지고 있는 요소 또는 성질
    - 관계 : 두 개체 간의 관계 정의

## 5. 개체 관계 모델 (E-R 모델)
- 현실 세계에 존재하는 데이터와 그들 간의 관계를 사람이 이해할 수 있는 형태로 명확하게 표현
- 개체 관계 다이어그램 기호 :
    - 개체 집합 : 사각형
    - 관계 집합 : 마름모
    - 속성 : 타원
    - 다중 값 속성 : 이중타원
    - 개체 집합 - 관계 집합 연결 : 실선
    - 개체 집합 - 속성 연결 : 실선
    - 관계 집합 - 속성 연결 : 점선

## 6. 정규화
- 데이터의 중복성을 제거하여 이상 현상 방지, 데이터 일관성 및 정확성 유지를 위해 무손실 분해
- 이상 현상 :
    - 데이터의 중복성으로 릴레이션을 조작할 때 발생하는 비합리적 현상
    - 삽입 이상 : 불필요한 세부정보 입력
    - 삭제 이상 : 원치 않는 다른 정보가 같이 삭제
    - 갱신 이상 : 중복 데이터 중에서 특정 부분만 수정되어 중복된 값이 모순을 일으키는 경우

- 함수 종속 :
    - 릴레이션에서 속성의 의미와 속성 간 상호 관계로부터 발생하는 제약조건
    - X -> Y 일때 X는 결정자, Y는 종속자
    - 부분 함수 종속 : 릴레이션에서 기본 키가 복합 키일 경우 기본 키를 구성하는 속성 중 일부에게 종속된 경우
    - 완전 함수 종속 : 릴레이션에서 X -> Y 관계가 있을 때, Y는 X의 전체 속성에 대해 종속하고, 부분 집합 속성에 종속하지 않는 경우
    - 이행 함수 종속 : 릴레이션에서 X -> Y, Y -> Z 종속 관계가 있을 때, X -> Z가 성립되는 경우

- 정규화 상세단계 :
    - 1차 정규화 : 원자값으로 구성, 반복 속성/중복 제거 필요
    - 2차 정규화 : 부분함수 종속 제거(완전 함수적 종속 관계), 주식별자 아닌 속성 분리
    - 3차 정규화 : 이행함수 종속 제거, 속성에 종속적인 속성을 분리
    - 보이스 - 코드 정규화 (BFCNF) : 결정자 함수 종속, 모든 결정자가 후보 키이다.
    - 4차 정규화 : 다치 종속 제거, 특정 속성값에 따라 선택적인 속성 분리
    - 5차 정규화 : 조인 종속 제거

- 반 정규화 :
    - 성능 향상과 개발 운영의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링 기법
    - 단점 : 데이터의 일관성 및 정합성 저하, 유지 비용 증가로 인한 성능 영향
    - 반 정규화 기법 :
        - 테이블 :
            - 테이블 병합 : 1:1 관계, 1:M 관계를 통합하여 조인 횟수를 줄여 성능 향상
            - 테이블 분할 (파티셔닝) :
                - 수평 분할 : 테이블 분할에 레코드를 기준으로 활용
                - 수직 분할 : 테이블이 가지는 컬럼 개수가 증가하는 경우 활용
            - 중복 테이블 추가 :
                - 실시간 통계정보를 계산하는 경우에 효과적인 수행을 위해 별도의 통계 테이블을 두거나 중복 테이블 추가
                - 집계 테이블 추가 : 집계 데이터를 위한 테이블 생성, 각 원본 테이블에 트리거를 설정하여 사용
                - 진행 테이블 추가 : 이력 관리 등의 목적으로 추가하는 테이블
                - 특정 부분만을 포함하는 테이블 추가 : 특정 부분만을 사용하는 경우 해당 부분으로 새로운 테이블 생성
        
        - 컬럼 :
            - 컬럼 중복화 : 조인 성능 향상을 위한 중복 허용

        - 관계 :
            - 중복관계 추가 : 발생할 수 있는 성능 저하를 위해 추가적 관계를 맺음
